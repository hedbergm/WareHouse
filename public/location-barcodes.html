<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Lokasjonsstrekkoder</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="/styles.css">
  <style>
    body{background:#fff;max-width:1200px;margin:0 auto;padding:20px}
    .grid{display:flex;flex-wrap:wrap;gap:18px}
    .loc-card{border:1px solid #ddd;border-radius:10px;padding:12px 14px;flex:1 1 240px;max-width:260px;background:#fafafa;display:flex;flex-direction:column;align-items:center;gap:6px}
    .loc-card h3{margin:0;font-size:15px;text-align:center}
    .loc-card img{max-width:100%;height:90px;object-fit:contain}
    .toolbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:10px}
    @media print {
      .toolbar{display:none}
      body{padding:4px}
      .loc-card{page-break-inside:avoid}
    }
  </style>
</head>
<body>
  <div class="toolbar">
    <div>
      <h1 style="margin:0;font-size:22px">Lokasjonsstrekkoder</h1>
      <div class="muted" style="font-size:12px">Automatisk generert – skriv ut og heng opp</div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <a href="/index.html" class="muted-link" style="font-size:14px">← Tilbake</a>
      <button class="btn" onclick="window.print()">Skriv ut</button>
    </div>
  </div>
  <div id="loading" class="muted" style="margin-bottom:12px">Laster...</div>
  <div class="grid" id="loc-grid"></div>
  <script>
    async function load(){
      try {
        const res = await fetch('/api/locations');
        const locs = await res.json();
        const grid = document.getElementById('loc-grid');
        document.getElementById('loading').style.display='none';
        grid.innerHTML = locs.map(l => `
          <div class="loc-card">
            <h3>${l.name}</h3>
            <img src="/api/locations/${l.id}/barcode.png" alt="${l.barcode}">
            <div style="font-size:12px;color:#555">${l.barcode}</div>
          </div>
        `).join('');
      } catch(e){
        document.getElementById('loading').textContent='Feil ved lasting';
      }
    }
    load();
  </script>
</body>
</html>
